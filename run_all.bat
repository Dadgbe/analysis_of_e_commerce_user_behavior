@echo off
REM ???????????????????????????????????????????????????????????
REM Запуск полного пайплайна e-commerce-аналитики
REM ???????????????????????????????????????????????????????????

REM 1) Активируем виртуальное окружение
call venv\Scripts\activate

REM 2) Скачиваем датасет в data_raw/
echo [1/4] Downloading raw dataset...
python data_set_download.py
if %errorlevel% neq 0 (
    echo Ошибка при скачивании датасета
    pause
    exit /b %errorlevel%
)

REM 3) Предобработка данных
echo [2/4] Preprocessing data...
python scripts\preprocess.py
if %errorlevel% neq 0 (
    echo Ошибка на этапе предобработки
    pause
    exit /b %errorlevel%
)

REM 4) Расчёт метрик
echo [3/4] Computing metrics...
python scripts\compute_metrics.py
if %errorlevel% neq 0 (
    echo Ошибка на этапе расчёта метрик
    pause
    exit /b %errorlevel%
)

REM 5) Генерация графиков и отчёта
echo [4/4] Generating analysis report...
python analysis\analysis_script.py
if %errorlevel% neq 0 (
    echo Ошибка на этапе генерации отчёта
    pause
    exit /b %errorlevel%
)

echo.
echo Все шаги выполнены успешно!
pause
